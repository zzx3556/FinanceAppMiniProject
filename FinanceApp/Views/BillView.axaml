<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="FinanceApp.Views.BillView"
             x:CompileBindings="False">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- æ ‡é¢˜è¡Œï¼šå·¦ä¾§æ˜¾ç¤ºé¡µé¢æ ‡é¢˜ï¼Œå³ä¾§æ˜¾ç¤ºå¯¼èˆªæŒ‰é’® -->
        <Grid Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="å¹´åº¦è´¦å•" FontSize="20" FontWeight="Bold" VerticalAlignment="Center"/>
            
            <!-- å³ä¸Šè§’å¯¼èˆªæŒ‰é’® -->
            <Button Content="ðŸ  è¿”å›žé¦–é¡µ" 
                    Command="{Binding NavigateToDashboardCommand}"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Padding="10,5"
                    Background="#2196F3"
                    Foreground="White"
                    BorderThickness="0"
                    CornerRadius="4"/>
        </Grid>

        <!-- å¹´ä»½é€‰æ‹© -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="10" Margin="0,0,0,20">
            <TextBlock Text="é€‰æ‹©å¹´ä»½:" VerticalAlignment="Center"/>
            <ComboBox x:Name="YearComboBox" Width="120"/>
        </StackPanel>

        <!-- å¹´åº¦æ±‡æ€»å¡ç‰‡ -->
        <Grid Grid.Row="2" Margin="0,0,0,30">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- å¹´åº¦æ”¶å…¥ -->
            <Border Grid.Column="0" Background="#E8F5E8" CornerRadius="10" Padding="20" Margin="5">
                <StackPanel>
                    <TextBlock Text="å¹´åº¦æ”¶å…¥" FontSize="14" Foreground="#666"/>
                    <TextBlock x:Name="YearlyIncomeText"
                               FontSize="24" 
                               FontWeight="Bold"
                               Foreground="#2E7D32"/>
                </StackPanel>
            </Border>

            <!-- å¹´åº¦æ”¯å‡º -->
            <Border Grid.Column="1" Background="#FFEBEE" CornerRadius="10" Padding="20" Margin="5">
                <StackPanel>
                    <TextBlock Text="å¹´åº¦æ”¯å‡º" FontSize="14" Foreground="#666"/>
                    <TextBlock x:Name="YearlyExpenseText"
                               FontSize="24" 
                               FontWeight="Bold"
                               Foreground="#C62828"/>
                </StackPanel>
            </Border>

            <!-- å¹´åº¦ä½™é¢ -->
            <Border Grid.Column="2" Background="#E3F2FD" CornerRadius="10" Padding="20" Margin="5">
                <StackPanel>
                    <TextBlock Text="å¹´åº¦ä½™é¢" FontSize="14" Foreground="#666"/>
                    <TextBlock x:Name="YearlyBalanceText"
                               FontSize="24" 
                               FontWeight="Bold"
                               Foreground="#2196F3"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- æœˆåº¦æ±‡æ€» -->
        <Grid Grid.Row="3">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- æœˆåº¦æ±‡æ€»æ ‡é¢˜ -->
            <TextBlock Grid.Row="0" Text="æœˆåº¦æ±‡æ€»" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>
            
            <!-- æœˆåº¦æ±‡æ€»åˆ—è¡¨ - å¯æ»‘åŠ¨ -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                <ItemsControl x:Name="MonthlySummariesControl">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Background="#F5F5F5" CornerRadius="5" Margin="0,5" Padding="15">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="100"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <TextBlock Grid.Column="0" 
                                               Text="{Binding Month}" 
                                               FontWeight="Bold" 
                                               VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="1" 
                                               Text="{Binding Income, StringFormat='æ”¶å…¥: Â¥{0:F2}'}" 
                                               Foreground="#2E7D32" 
                                               VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="2" 
                                               Text="{Binding Expense, StringFormat='æ”¯å‡º: Â¥{0:F2}'}" 
                                               Foreground="#C62828" 
                                               VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="3" 
                                               Text="{Binding Balance, StringFormat='ç»“ä½™: Â¥{0:F2}'}" 
                                               Foreground="#2196F3" 
                                               VerticalAlignment="Center"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Grid>

        <!-- åŠ è½½æŒ‡ç¤ºå™¨ -->
        <Border Grid.Row="0" Grid.RowSpan="4" 
                x:Name="LoadingIndicator"
                Background="#80000000" 
                VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
                IsVisible="False">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <ProgressBar IsIndeterminate="True" Width="200" Height="10" Margin="0,0,0,10"/>
                <TextBlock Text="åŠ è½½ä¸­..." Foreground="White" HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>